#!/bin/bash

copy() {
  basename = $1
  versions = $2
  rm -rf ${basename}*
  for at in "${versions[@]}"; do
    echo "copying $at ..."
    rsync -rv --exclude=.git _$basename/ $at
    sed -i -e "s/__APP_TYPE__/$at/g" $at/manifest.toml
    rm $at/manifest.toml-e
    touch $at/AUTOGENERATED_DO_NOT_EDIT
  done
}

gotypes=( go1.1.2 go1.2 go1.2.1 )
copy "go" $gotypes
rubytypes=( ruby1.9.3 )
copy "ruby" $rubytypes
